<!DOCTYPE html>
<html lang="ru">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Электрокар||Прогнозирование работы аккумулятора</title>
    <link rel="stylesheet" href="css/main.css">

</head>

<body>
    <div class="conteniner">
        <nav class="navbar content ">
            <button id="toggleButton"><img src="source/img/bars-svgrepo-com.svg" class="toggleImg"></button>

            <a href="/index.html"><img src="/source/img/logo.png" alt="" class="logo"></a>


            <div class="hamburger" id="hamburger"><svg xmlns="http://www.w3.org/2000/svg" width="40" height="40"
                    fill="currentColor" class="bi bi-person-circle" viewBox="0 0 30 30">
                    <path d="M20.625 11.25a5.625 5.625 0 1 1-11.25 0 5.625 5.625 0 0 1 11.25 0" />
                    <path fill-rule="evenodd"
                        d="M0 15a15 15 0 1 1 30 0 15 15 0 0 1-30 0M15 1.875A13.125 13.125 0 0 0 4.748 23.194C6.079 21.049 9.009 18.75 15 18.75s8.919 2.297 10.252 4.444A13.125 13.125 0 0 0 15 1.875" />
                </svg>
            </div>
            <nav class="menu" id="menu">
                <li><a href="../pages/registration.html">регистрация</a></li>
                <li><a href="#services">полезное</a></li>
                <hr>
                <li><a href="#contact">Выйти</a></li>
            </nav>

        </nav>
        <div class="content" id="content">

            <div class="sidebar " id="sidebar">
                <div class="content_sidebar">
                    <h2>Быстрое меню</h2>
                    <ul style="list-style-type: none;">
                        <li><a href="#">Советы и рекомендации</a></li>
                        <hr>
                        <li><a href="#">Карта зарядных станций </a></li>
                        <hr>
                        <li><a href="#">Часто задавыемые вопросы</a></li>
                        <hr>
                        <li><a href="#">Полезное</a></li>
                        <hr>
                    </ul>
                </div>

            </div>
            <div class="content_main">
                <main>
                    <h1>
                        Добро пожаловать на наш сайт, посвященный услугам, связанным с электромобилями! Мы рады
                        приветствовать вас здесь и предлагаем вашему вниманию уникальную возможность оценить состояние
                        аккумулятора вашего электромобиля.
                    </h1>
                    <div class="block">
                        <h2>Просто введите необходимые данные в специальную форму, и на основе них мы предоставим вам
                            примерный прогноз по состоянию аккумулятора а так же составим удобный маршрут для вашей
                            поездки. Эта информация поможет вам планировать свои
                            поездки и обеспечит надежную работу вашего электромобиля.
                        </h2>
                        <div>
                            <form id="battery_analysis" class="form"> <!--method="POST" action="/submit-data"-->
                                <div>
                                    <label for="car_model">Модель авто</label>
                                    <input type="text" id="car_model" name="car_model" list="car_model_list"
                                        aria-label="Модель авто" required>
                                    <datalist id="car_model_list"></datalist>
                                </div>
                                <div>
                                    <label for="probeg_km">Пробег, км</label>
                                    <input id="probeg_km" type="number" name="probeg_km"
                                        placeholder="Введите пробег, км" min="0" required />
                                </div>
                                <div>
                                    <label for="battery_age_months">Время использования, месяцев</label>
                                    <input id="battery_age_months" type="number" name="battery_age_months"
                                        placeholder="Введите время использования" min="0" required />
                                </div>

                                <div>
                                    <button type="submit">Отправить</button>
                                </div>
                            </form>

                        </div>
                        <div class="block">
                            <h2>результаты</h2>
                            <div class="battery-result_container">
                                <div class="loading" id="loading">
                                    <span class="loader"></span>
                                    <span>Идет обработка...</span>
                                </div>

                                <div class="battery-result_content">
                                </div>

                            </div>
                        </div>

                    </div>
                    <div class="block">
                        <h2>Расчёт маршрута для электромобиля </h2>
                        <form id="mapForm" class="form" style="display: flex;">
                            <div>
                                <label for="start_point">Начальный пункт</label>
                                <input id="start_point" type="text" name="start_point"
                                    placeholder="Введите начальный пункт" required />
                            </div>
                            <div>
                                <label for="end_point">Конечный пункт</label>
                                <input id="end_point" type="text" name="end_point" placeholder="Введите конечный пункт"
                                    required />
                            </div>
                            <div>
                                <label for="current_charge">Текущий уровень заряда (%)</label>
                                <input id="current_charge" type="number" name="current_charge"
                                    placeholder="Введите уровень заряда" min="0" max="100" required />
                            </div>
                            <div>
                                <label>Дополнительные параметры</label>
                                <div class="checkbox-group">
                                    <label><input type="checkbox" name="parameters" value="min_energy" /> Минимизировать
                                        затрату энергии</label>
                                    <label><input type="checkbox" name="parameters" value="charging_stations" /> Заехать
                                        на зарядную станцию по пути</label>
                                    <label><input type="checkbox" name="parameters" value="specific_road" />
                                        Использовать определённый тип дороги</label>
                                </div>
                                <div>
                                    <button type="submit">Расчитать</button>
                                </div>


                        </form>

                    </div>
                    <div class="block">
                        <h2>результаты</h2>
                        <div class="map-result_container">
                            <div class="loading" id="loading">
                                <span class="loader"></span>
                                <span>Идет обработка...</span>
                            </div>

                            <div class="map-result_content">
                            </div>

                        </div>
                    </div>


                </main>
                <footer>
                    <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Iusto dolor nobis, consequuntur officia
                        distinctio laboriosam rem maxime ad quasi dolorum velit cupiditate impedit eius facilis!</p>
                </footer>
            </div>
        </div>
    </div>
</body>

<script src="js/batteryForm.js" defer></script>
<script src="js/mapForm.js" defer></script>
<script src="js/sidebar.js"></script>
<script src="js/dropDownMenu.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
<link href="http://cdn.jsdelivr.net/npm/suggestions-jquery@22.6.0/dist/css/suggestions.min.css" rel="stylesheet" />
<script src="http://cdn.jsdelivr.net/npm/suggestions-jquery@22.6.0/dist/js/jquery.suggestions.min.js"></script>
<script>
    $("#start_point, #end_point").suggestions({
        token: "cde0d12eec2ca41cbcff79ef0b2352fee9780874",
        type: "ADDRESS",
        /* Вызывается, когда пользователь выбирает одну из подсказок */
        onSelect: function (suggestion) {
            console.log(suggestion);
        }
    });
</script>
<script>
    document.getElementById("car_model").addEventListener("input", function () {
        let query = this.value.toLowerCase();
        let datalist = document.getElementById("car_model_list");

        if (query.length < 1) {
            datalist.innerHTML = ""; // Очищаем список, если нет ввода
            return;
        }

        fetch("./js/carsModels.json") // путь к JSON-файлу
            .then(response => response.json())
            .then(data => {
                datalist.innerHTML = ""; // Очищаем перед обновлением
                let count = 0; // Счётчик для ограничения количества
                data.forEach(option => {
                    if (option.name.toLowerCase().includes(query) && count < 5) { // Фильтруем и ограничиваем
                        let opt = document.createElement("option");
                        opt.value = option.name;
                        datalist.appendChild(opt);
                        count++; // Увеличиваем счётчик
                    }
                });
            })
            .catch(error => console.error("Ошибка загрузки данных:", error));
    });

</script>


</html>